<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags - Optimized for high search volume, low competition keywords -->
    <title>Free AI Image Generator Online - Create Images Instantly | No Login Required</title>
    <meta name="description" content="Generate stunning AI images for free with our advanced image generator. Create unlimited AI art, photos, and designs instantly. No signup or watermarks. Multiple AI models available.">
    <meta name="keywords" content="free ai image generator, ai art generator free, free image generator online, create ai images free, text to image generator, ai picture generator free, free ai art maker, online image generator, ai photo creator free, generate images with ai">
    
    <!-- Open Graph Meta Tags for Social Sharing -->
    <meta property="og:title" content="Free AI Image Generator - Create Stunning Images Instantly">
    <meta property="og:description" content="Generate unlimited AI images for free. No login, no watermarks. Multiple AI models and styles available.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://image.pollinations.ai/prompt/AI%20image%20generator%20logo%20modern%20colorful">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Free AI Image Generator Online">
    <meta name="twitter:description" content="Create stunning AI images for free. No signup required.">
    
    <!-- Additional SEO Tags -->
    <meta name="robots" content="index, follow">
    <meta name="author" content="Free AI Image Generator">
    <link rel="canonical" href="https://yourwebsite.com">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üé®</text></svg>">
    
    <!-- Google Fonts - Distinctive Typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent-color: #667eea;
            --bg-dark: #0f0f23;
            --bg-card: #1a1a2e;
            --text-primary: #ffffff;
            --text-secondary: #a0aec0;
            --border-color: rgba(255, 255, 255, 0.1);
            --success-color: #48bb78;
            --error-color: #f56565;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(245, 87, 108, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
            animation: backgroundPulse 20s ease-in-out infinite;
        }

        @keyframes backgroundPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Header */
        header {
            padding: 2rem 5%;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 15, 35, 0.8);
        }

        h1 {
            font-family: 'Archivo Black', sans-serif;
            font-size: clamp(2rem, 5vw, 3.5rem);
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
            animation: fadeInDown 0.8s ease-out;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: clamp(1rem, 2vw, 1.25rem);
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 5%;
        }

        /* Generator Section */
        .generator-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
            animation: fadeIn 1s ease-out 0.4s both;
        }

        .input-panel, .output-panel {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .input-panel:hover, .output-panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 60px rgba(102, 126, 234, 0.2);
        }

        .panel-title {
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .panel-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: var(--primary-gradient);
            border-radius: 2px;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .prompt-container {
            position: relative;
            display: flex;
            gap: 0.5rem;
        }

        #prompt {
            flex: 1;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: 'DM Sans', sans-serif;
            resize: vertical;
            min-height: 120px;
            transition: all 0.3s ease;
        }

        #prompt:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        #enhanceBtn {
            padding: 1rem;
            background: var(--secondary-gradient);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-size: 0.9rem;
            height: fit-content;
        }

        #enhanceBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(245, 87, 108, 0.3);
        }

        #enhanceBtn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        select {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        select:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        select option {
            background: var(--bg-card);
            color: var(--text-primary);
        }

        /* Generate Button */
        #generateBtn {
            width: 100%;
            padding: 1.25rem;
            background: var(--primary-gradient);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        #generateBtn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        #generateBtn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Output Panel */
        .image-container {
            position: relative;
            width: 100%;
            min-height: 400px;
            background: rgba(255, 255, 255, 0.03);
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        #generatedImage {
            max-width: 100%;
            max-height: 600px;
            border-radius: 8px;
            display: none;
            animation: zoomIn 0.5s ease-out;
        }

        #generatedImage.show {
            display: block;
        }

        .placeholder {
            text-align: center;
            color: var(--text-secondary);
        }

        .placeholder-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        /* Loading Spinner */
        .spinner {
            display: none;
            width: 50px;
            height: 50px;
            border: 4px solid rgba(102, 126, 234, 0.1);
            border-top-color: var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .spinner.show {
            display: block;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Download Button */
        #downloadBtn {
            width: 100%;
            padding: 1rem;
            background: var(--success-color);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
            display: none;
        }

        #downloadBtn.show {
            display: block;
        }

        #downloadBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(72, 187, 120, 0.3);
        }

        /* Features Section */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin: 4rem 0;
        }

        .feature-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            animation: fadeInUp 0.8s ease-out both;
        }

        .feature-card:nth-child(1) { animation-delay: 0.1s; }
        .feature-card:nth-child(2) { animation-delay: 0.2s; }
        .feature-card:nth-child(3) { animation-delay: 0.3s; }
        .feature-card:nth-child(4) { animation-delay: 0.4s; }

        .feature-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent-color);
            box-shadow: 0 20px 60px rgba(102, 126, 234, 0.2);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .feature-card h3 {
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .feature-card p {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* SEO Content Section */
        .seo-content {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 3rem;
            margin: 4rem 0;
        }

        .seo-content h2 {
            font-family: 'Archivo Black', sans-serif;
            font-size: 2rem;
            margin-bottom: 1rem;
            background: var(--secondary-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .seo-content p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.8;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem 5%;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
            margin-top: 4rem;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Responsive Design */
        @media (max-width: 968px) {
            .generator-section {
                grid-template-columns: 1fr;
            }

            .features {
                grid-template-columns: 1fr;
            }

            .container {
                padding: 2rem 5%;
            }

            .input-panel, .output-panel {
                padding: 1.5rem;
            }
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: none;
            animation: slideInRight 0.3s ease-out;
            z-index: 1000;
        }

        .toast.show {
            display: block;
        }

        .toast.success {
            border-color: var(--success-color);
        }

        .toast.error {
            border-color: var(--error-color);
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Error Message Display */
        .error-display {
            display: none;
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
        }

        .error-display.show {
            display: block;
        }

        .error-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: bounce 2s ease-in-out infinite;
        }

        .error-display h3 {
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .error-display p {
            font-size: 1rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .retry-btn {
            padding: 0.75rem 2rem;
            background: var(--primary-gradient);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .retry-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>üé® Free AI Image Generator</h1>
        <p class="subtitle">Create Stunning AI Images Instantly - No Login Required | Powered by Advanced AI Models</p>
    </header>

    <div class="container">
        <div class="generator-section">
            <!-- Input Panel -->
            <div class="input-panel">
                <h2 class="panel-title">Generate Your Image</h2>
                
                <div class="form-group">
                    <label for="prompt">Enter Your Prompt</label>
                    <div class="prompt-container">
                        <textarea 
                            id="prompt" 
                            placeholder="Describe the image you want to create... (e.g., 'A futuristic city at sunset with flying cars')"
                            rows="5"
                        ></textarea>
                        <button id="enhanceBtn" title="Enhance your prompt with AI">
                            ‚ú® Enhance
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="model">AI Model</label>
                    <select id="model">
                        <option value="flux">Flux (Recommended - High Quality)</option>
                        <option value="flux-realism">Flux Realism (Photorealistic)</option>
                        <option value="flux-anime">Flux Anime</option>
                        <option value="flux-3d">Flux 3D</option>
                        <option value="turbo">Turbo (Fast Generation)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="aspectRatio">Aspect Ratio</label>
                    <select id="aspectRatio">
                        <option value="1:1">Square (1:1) - 1024x1024</option>
                        <option value="16:9">Landscape (16:9) - 1920x1080</option>
                        <option value="9:16">Portrait (9:16) - 1080x1920</option>
                        <option value="4:3">Standard (4:3) - 1024x768</option>
                        <option value="3:4">Portrait (3:4) - 768x1024</option>
                        <option value="21:9">Ultra Wide (21:9) - 2560x1080</option>
                        <option value="3:2">Photo (3:2) - 1536x1024</option>
                        <option value="2:3">Portrait Photo (2:3) - 1024x1536</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="style">Image Style</label>
                    <select id="style">
                        <option value="">None (Default)</option>
                        <option value="photorealistic">Photorealistic</option>
                        <option value="digital art">Digital Art</option>
                        <option value="oil painting">Oil Painting</option>
                        <option value="watercolor">Watercolor</option>
                        <option value="anime style">Anime Style</option>
                        <option value="3D render">3D Render</option>
                        <option value="pixel art">Pixel Art</option>
                        <option value="sketch">Sketch</option>
                        <option value="cyberpunk">Cyberpunk</option>
                        <option value="fantasy art">Fantasy Art</option>
                        <option value="minimalist">Minimalist</option>
                        <option value="vintage">Vintage</option>
                    </select>
                </div>

                <button id="generateBtn">üöÄ Generate Image</button>
            </div>

            <!-- Output Panel -->
            <div class="output-panel">
                <h2 class="panel-title">Your Generated Image</h2>
                
                <div class="image-container">
                    <div class="placeholder" id="placeholder">
                        <div class="placeholder-icon">üñºÔ∏è</div>
                        <p>Your generated image will appear here</p>
                    </div>
                    <div class="spinner" id="spinner"></div>
                    <div class="error-display" id="errorDisplay">
                        <div class="error-icon">‚è≥</div>
                        <h3>Oops! Something went wrong</h3>
                        <p>Our AI is taking a quick break. Please try again in a moment.</p>
                        <button class="retry-btn" id="retryBtn">üîÑ Try Again</button>
                    </div>
                    <img id="generatedImage" alt="Generated AI Image">
                </div>

                <button id="downloadBtn">‚¨áÔ∏è Download Image</button>
            </div>
        </div>

        <!-- Features Section -->
        <section class="features">
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h3>Lightning Fast</h3>
                <p>Generate high-quality AI images in seconds with our advanced AI models</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üÜì</div>
                <h3>100% Free</h3>
                <p>Unlimited image generation with no hidden costs or subscription fees</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üéØ</div>
                <h3>Multiple AI Models</h3>
                <p>Choose from various AI models including Flux, Turbo, and specialized styles</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üîí</div>
                <h3>No Login Required</h3>
                <p>Start creating immediately without any registration or personal information</p>
            </div>
        </section>

        <!-- SEO Content Section -->
        <section class="seo-content">
            <h2>Create Amazing AI Images with Our Free AI Image Generator</h2>
            <p>
                Welcome to the most advanced <strong>free AI image generator online</strong>. Our platform allows you to create stunning, high-quality images using cutting-edge artificial intelligence technology. Whether you're a designer, marketer, content creator, or just exploring AI art, our tool provides unlimited access to professional-grade image generation.
            </p>
            <p>
                Unlike other AI image generators that require subscriptions or limit your creations, our <strong>free AI art generator</strong> offers truly unlimited usage. Simply enter your text prompt, select your preferred AI model and style, and watch as our advanced AI transforms your ideas into beautiful, unique images in seconds.
            </p>
            <p>
                Our platform supports multiple AI models including the powerful Flux models for photorealistic images, anime-style creations, 3D renders, and more. With options for various artistic styles from oil paintings to cyberpunk aesthetics, you have complete creative freedom to bring your vision to life.
            </p>
            <p>
                <strong>Key Features:</strong> No watermarks, instant generation, commercial use allowed, multiple AI models, style customization, prompt enhancement, high-resolution output, and completely free forever. Start creating your AI masterpieces today!
            </p>
        </section>
    </div>

    <footer>
        <p>&copy; 2024 Free AI Image Generator. Powered by Pollinations.ai | Create unlimited AI images for free</p>
        <p>Keywords: free ai image generator, ai art generator, text to image, create ai images free, online image generator</p>
    </footer>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // DOM Elements
        const promptInput = document.getElementById('prompt');
        const modelSelect = document.getElementById('model');
        const aspectRatioSelect = document.getElementById('aspectRatio');
        const styleSelect = document.getElementById('style');
        const enhanceBtn = document.getElementById('enhanceBtn');
        const generateBtn = document.getElementById('generateBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const retryBtn = document.getElementById('retryBtn');
        const generatedImage = document.getElementById('generatedImage');
        const placeholder = document.getElementById('placeholder');
        const spinner = document.getElementById('spinner');
        const errorDisplay = document.getElementById('errorDisplay');
        const toast = document.getElementById('toast');

        // Pollinations.ai API Configuration
        const IMAGE_API_BASE = 'https://image.pollinations.ai/prompt';
        const TEXT_API_BASE = 'https://text.pollinations.ai';

        // Aspect ratio calculations
        const aspectRatios = {
            '1:1': { width: 1024, height: 1024 },
            '16:9': { width: 1920, height: 1080 },
            '9:16': { width: 1080, height: 1920 },
            '4:3': { width: 1024, height: 768 },
            '3:4': { width: 768, height: 1024 },
            '21:9': { width: 2560, height: 1080 },
            '3:2': { width: 1536, height: 1024 },
            '2:3': { width: 1024, height: 1536 }
        };

        // Friendly error messages
        const errorMessages = [
            {
                icon: '‚è≥',
                title: 'Taking a Short Break',
                message: 'Our AI is catching its breath. Please try again in a moment!'
            },
            {
                icon: 'üé®',
                title: 'Artist on Coffee Break',
                message: 'Our AI artist is refueling. Give it a moment and try again!'
            },
            {
                icon: 'üöÄ',
                title: 'Preparing Your Canvas',
                message: 'Looks like we hit a small bump. Let\'s try that again!'
            },
            {
                icon: '‚ú®',
                title: 'Magic in Progress',
                message: 'The AI is brewing something special. Try again shortly!'
            }
        ];

        // Get random error message
        function getRandomErrorMessage() {
            return errorMessages[Math.floor(Math.random() * errorMessages.length)];
        }

        // Show error display with friendly message
        function showErrorDisplay() {
            const errorMsg = getRandomErrorMessage();
            const errorIcon = errorDisplay.querySelector('.error-icon');
            const errorTitle = errorDisplay.querySelector('h3');
            const errorText = errorDisplay.querySelector('p');
            
            errorIcon.textContent = errorMsg.icon;
            errorTitle.textContent = errorMsg.title;
            errorText.textContent = errorMsg.message;
            
            spinner.classList.remove('show');
            placeholder.style.display = 'none';
            generatedImage.classList.remove('show');
            errorDisplay.classList.add('show');
            downloadBtn.classList.remove('show');
        }

        // Hide error display
        function hideErrorDisplay() {
            errorDisplay.classList.remove('show');
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            toast.textContent = message;
            toast.className = `toast show ${type}`;
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Enhance prompt using AI
        async function enhancePrompt() {
            const currentPrompt = promptInput.value.trim();
            
            if (!currentPrompt) {
                showToast('Please enter a prompt first', 'error');
                return;
            }

            enhanceBtn.disabled = true;
            enhanceBtn.textContent = '‚ú® Enhancing...';

            try {
                const enhanceQuery = `Enhance this image generation prompt to be more detailed and descriptive, but keep it concise (max 100 words). Original prompt: "${currentPrompt}". Return only the enhanced prompt, nothing else.`;
                
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 second timeout
                
                const response = await fetch(`${TEXT_API_BASE}/${encodeURIComponent(enhanceQuery)}?model=openai`, {
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                
                if (!response.ok) {
                    throw new Error('Service temporarily unavailable');
                }
                
                const enhancedPrompt = await response.text();
                promptInput.value = enhancedPrompt.trim();
                showToast('Prompt enhanced successfully! ‚ú®');
            } catch (error) {
                console.error('Enhancement error:', error);
                if (error.name === 'AbortError') {
                    showToast('Request timed out. Please try again.', 'error');
                } else {
                    showToast('Enhancement unavailable. Your original prompt works great!', 'error');
                }
            } finally {
                enhanceBtn.disabled = false;
                enhanceBtn.textContent = '‚ú® Enhance';
            }
        }

        // Generate image
        async function generateImage() {
            const prompt = promptInput.value.trim();
            const model = modelSelect.value;
            const aspectRatio = aspectRatioSelect.value;
            const style = styleSelect.value;

            if (!prompt) {
                showToast('Please enter a prompt', 'error');
                return;
            }

            // Get dimensions based on aspect ratio
            const dimensions = aspectRatios[aspectRatio];

            // Build final prompt with style if selected
            let finalPrompt = prompt;
            if (style) {
                finalPrompt = `${prompt}, ${style}`;
            }

            // Show loading state
            generateBtn.disabled = true;
            generateBtn.textContent = 'üé® Generating...';
            placeholder.style.display = 'none';
            generatedImage.classList.remove('show');
            downloadBtn.classList.remove('show');
            hideErrorDisplay();
            spinner.classList.add('show');

            try {
                // Construct image URL with all parameters
                const params = new URLSearchParams({
                    model: model,
                    width: dimensions.width,
                    height: dimensions.height,
                    nologo: 'true',
                    enhance: 'false'
                });

                const imageUrl = `${IMAGE_API_BASE}/${encodeURIComponent(finalPrompt)}?${params.toString()}`;
                
                // Create a new image to test loading with timeout
                const img = new Image();
                img.crossOrigin = 'anonymous';
                
                // Set up timeout for image loading (60 seconds)
                const loadTimeout = setTimeout(() => {
                    img.src = ''; // Cancel loading
                    throw new Error('Image generation timeout');
                }, 60000);
                
                img.onload = () => {
                    clearTimeout(loadTimeout);
                    generatedImage.src = imageUrl;
                    generatedImage.classList.add('show');
                    spinner.classList.remove('show');
                    downloadBtn.classList.add('show');
                    generateBtn.disabled = false;
                    generateBtn.textContent = 'üöÄ Generate Image';
                    showToast('Image generated successfully! üéâ');
                };

                img.onerror = () => {
                    clearTimeout(loadTimeout);
                    throw new Error('Failed to load image');
                };

                img.src = imageUrl;

            } catch (error) {
                console.error('Generation error:', error);
                showErrorDisplay();
                generateBtn.disabled = false;
                generateBtn.textContent = 'üöÄ Generate Image';
                
                // Don't show toast for errors, the error display handles it
            }
        }

        // Download image
        async function downloadImage() {
            try {
                showToast('Preparing download...', 'success');
                const response = await fetch(generatedImage.src);
                
                if (!response.ok) {
                    throw new Error('Download failed');
                }
                
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `ai-generated-image-${Date.now()}.jpg`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
                showToast('Image downloaded successfully! ‚¨áÔ∏è');
            } catch (error) {
                console.error('Download error:', error);
                showToast('Download unavailable. Try right-click > Save Image', 'error');
            }
        }

        // Event Listeners
        enhanceBtn.addEventListener('click', enhancePrompt);
        generateBtn.addEventListener('click', generateImage);
        downloadBtn.addEventListener('click', downloadImage);
        retryBtn.addEventListener('click', generateImage);

        // Allow Enter key to generate (Ctrl/Cmd + Enter in textarea)
        promptInput.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                generateImage();
            }
        });

        // Generate example on load
        window.addEventListener('load', () => {
            promptInput.value = 'A majestic dragon flying over a fantasy castle at sunset, epic fantasy art';
        });
    </script>
</body>
</html>